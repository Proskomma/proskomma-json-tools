{
  "$id": "https://usfm-committee/usj.schema.json",
  "title": "Unified Scripture JSON",
  "description": "The JSON varient of USFM and USX data models",
  "type": "object",
  "$defs": {
    "paraMarkerObject": {
      "type": "object",
      "properties": {
        "type": {
          "description": "The kind/category of node or element this is, corresponding the USFM marker and USX node",
          "type": "string",
          "pattern": "^[^ \t\r\n]+$"
        },
        "marker": {
          "description": "The corresponding marker in USFM or style in USX",
          "type": "string",
          "pattern": "^[^ \t\r\n]+$"
        },
        "content": {
          "type": "array",
          "items": {
            "anyOf":[
              {"type": "string"},
              {"$ref": "#/$defs/charMarkerObject"}
            ]
          }
        },
        "sid": {
          "description": "Indicates the Book-Chapter-Verse value in the paragraph-based structure",
          "type": "string",
          "pattern": "(^[0-6A-Z]{3}( [1-9][0-9]{0,2}(:[1-9][0-9]{0,2}(-[1-9][0-9]{0,2})?)?)?$)|.*"
        },
        "number": {
          "description": "Chapter number or verse number",
          "type": "string",
          "pattern": "^[1-9][0-9]{0,2}(-[1-9][0-9]{0,2})?$"
        },
        "code": {
          "description": "The 3-letter book code in id element",
          "pattern": "^[0-6A-Z]{3}$",
          "type": "string"
        },
        "altnumber": {
          "description": "Alternate chapter number or verse number",
          "type": "string",
          "pattern": "^[^ \t\r\n](.*[^ \t\r\n])?$"
        },
        "pubnumber": {
          "description": "Published character of chapter or verse",
          "type": "string",
          "pattern": "^[^ \t\r\n](.*[^ \t\r\n])?$"
        },
        "caller": {
          "description": "Caller character for footnotes and cross-refs",
          "type": "string",
          "pattern": "^[^ \t\n]$"
        },
        "align": {
          "description": "Alignment of table cells",
          "type": "string",
          "enum": ["start", "end", "center"]
        },
        "category": {
          "description": "Category of extended study bible sections",
          "type": "string",
          "pattern": "^[^ \t\r\n](.*[^ \t\r\n])?$"
        },
        "link-id": {
          "description": "ID for link",
          "type": "string"
        },
        "link-href": {
          "description": "ID for link",
          "type": "string",
          "pattern": "^[^ \t\r\n](.*[^ \t\r\n])?$"
        },
        "who": {
          "description": "The speaker in an sp tag",
          "type": "string",
          "pattern": "^[^ \t\r\n](.*[^ \t\r\n])?$"
        },
        "eid": {
          "description": "The end milestone id",
          "type": "string",
          "pattern": "^[^ \t\r\n](.*[^ \t\r\n])?$"
        },
        "file": {
          "description": "The filename",
          "type": "string",
          "pattern": "^[^ \t\r\n](.*[^ \t\r\n])?$"
        },
        "size": {
          "description": "The file size",
          "type": "string"
        },
        "ref": {
          "description": "The file ref",
          "type": "string",
          "pattern": "^[^ \t\r\n](.*[^ \t\r\n])?$"
        }
      },
      "required": ["type", "marker"],
      "additionalProperties" : false
    },
    "charMarkerObject": {
      "type": "object",
      "properties": {
        "type": {
          "description": "The kind/category of node or element this is, corresponding the USFM marker and USX node",
          "type": "string",
          "pattern": "^[^ \t\r\n]+$"
        },
        "marker": {
          "description": "The corresponding marker in USFM or style in USX",
          "type": "string",
          "pattern": "^[^ \t\r\n]+$"
        },
        "content": {
          "type": "array",
          "items": {
            "anyOf":[
              {"type": "string"},
              {"$ref": "#/$defs/charMarkerObject"}
            ]
          }
        },
        "sid": {
          "description": "Indicates the Book-Chapter-Verse value in the paragraph-based structure",
          "type": "string",
          "pattern": "(^[0-6A-Z]{3}( [1-9][0-9]{0,2}(:[1-9][0-9]{0,2}(-[1-9][0-9]{0,2})?)?)?$)|.*"
        },
        "number": {
          "description": "Chapter number or verse number",
          "type": "string",
          "pattern": "^[1-9][0-9]{0,2}(-[1-9][0-9]{0,2})?$"
        },
        "code": {
          "description": "The 3-letter book code in id element",
          "pattern": "^[0-6A-Z]{3}$",
          "type": "string"
        },
        "altnumber": {
          "description": "Alternate chapter number or verse number",
          "type": "string",
          "pattern": "^[^ \t\r\n](.*[^ \t\r\n])?$"
        },
        "pubnumber": {
          "description": "Published character of chapter or verse",
          "type": "string",
          "pattern": "^[^ \t\r\n](.*[^ \t\r\n])?$"
        },
        "caller": {
          "description": "Caller character for footnotes and cross-refs",
          "type": "string",
          "pattern": "^[^ \t\n]$"
        },
        "align": {
          "description": "Alignment of table cells",
          "type": "string",
          "enum": ["start", "end", "center"]
        },
        "category": {
          "description": "Category of extended study bible sections",
          "type": "string",
          "pattern": "^[^ \t\r\n](.*[^ \t\r\n])?$"
        },
        "link-id": {
          "description": "ID for link",
          "type": "string"
        },
        "link-href": {
          "description": "ID for link",
          "type": "string",
          "pattern": "^[^ \t\r\n](.*[^ \t\r\n])?$"
        },
        "who": {
          "description": "The speaker in an sp tag",
          "type": "string",
          "pattern": "^[^ \t\r\n](.*[^ \t\r\n])?$"
        },
        "eid": {
          "description": "The end milestone id",
          "type": "string",
          "pattern": "^[^ \t\r\n](.*[^ \t\r\n])?$"
        },
        "file": {
          "description": "The filename",
          "type": "string",
          "pattern": "^[^ \t\r\n](.*[^ \t\r\n])?$"
        },
        "size": {
          "description": "The file size",
          "type": "string"
        },
        "ref": {
          "description": "The file ref",
          "type": "string",
          "pattern": "^[^ \t\r\n](.*[^ \t\r\n])?$"
        }
      },
      "required": ["type", "marker"],
      "additionalProperties" : false
    }
   },
  "properties": {
    "type": {
      "description": "The kind of node/element/marker this is",
      "type": "string"
    },
    "version": {
      "description": "The USJ spec version",
      "type": "string"
    },
    "content": {
      "description": "The JSON representation of scripture contents from USFM/USX",
      "type": "array",
      "items":{
          "$ref": "#/$defs/paraMarkerObject"
      }
    }
  },
  "required": ["type", "version", "content"],
  "additionalProperties": false
}
